<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml">

    <ui:define name="content">
        <h:form>
            <center>

                <!-- Guarda -->
                <p:panel header="" style="border-style: none" toggleable="true" visible="#{usuario.getIdperfil().getNmperfil() == 'Guarda'}" id="pnlGuardaIndex"> 
                    <p:chart type="bar" model="#{relatorioOcorrenciaController.relOcorrenciaPorGuardaMensal}" style="height:300px;width: 60%"  />
                    <br></br>
                    <p:commandButton value="Iniciar Turno"/> <p:spacer width="50"/>
                    <p:commandButton value="Finalizar Turno"/>
                </p:panel>
            </center>

            <!-- Administrador -->
            <p:panel header="" style="border-style: none"  toggleable="false" visible="#{usuario.getIdperfil().getNmperfil() == 'Administrador'}" id="pnlAdministradorIndex"> 
                <h1 class="title  ui-corner-all">As seguintes ações preventivas estão configuradas para o sistema:</h1>
                <ul>
                    <li>
                        Exibe alerta para os módulos que atingirem mais de 50% do total das ocorrências do mês e recomenda 3 rondas a cada 1 hora durante 7 dias
                    </li>
                    <li>Informa se houve diminuição das ocorrências naqueles módulos após as rondas preventivas</li>
                    <li>Sugere rotas passando por módulos com maior quantidade de ocorrências, caso um módulo ultrapasse 20% das ocorrências semanais, exibe alerta sugerindo rondas passando pelo módulo.</li>
                </ul>
                
                <p:commandButton value="Modal" type="button" onclick="PF('dlg2').show();"/>
                <p:dialog header="Ações Preventivas" widgetVar="dlgAlertasPreventiva" id="dlgAlertasPreventiva" modal="false" height="100">
                    <h:outputText value="#{relatorioAcaoPreventiva.modulo50PercentTexto}" style="color: red"/>
                </p:dialog> 
            </p:panel>

            <p:panel header="" style="border-style: none" toggleable="true" visible="#{usuario == null}" id="pnlGeralIndex">
                Seja Bem Vindo!
            </p:panel>
        </h:form>
    </ui:define>

</ui:composition>

